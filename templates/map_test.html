<!DOCTYPE html>
<html lang="en">
    <head>
        <style>
            html, body {
                height: 100%;
                margin: 0;
                padding: 0;
            }
            #map {
                height: 100vh;
                width: 100vw;
                position: absolute;
                top: 0;
                left: 0;
                z-index: 1;
            }
            #weatherInfo {
                position: absolute;
                bottom: 20px;
                left: 20px;
                background: rgba(255, 255, 255, 0.9);
                padding: 15px;
                border-radius: 5px;
                max-width: 400px;
                max-height: 80vh;
                overflow-y: auto;
                z-index: 2;
                box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            }
            #loadingMessage {
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                font-size: 18px;
                color: #666;
                background: rgba(255, 255, 255, 0.9);
                padding: 15px;
                border-radius: 5px;
                z-index: 3;
            }
        </style>

        <script>
            function loadLocalLeafletCss() {
                document.write("<link rel='stylesheet' href='{{url_for('static', filename='content/libs/leaflet/leaflet.css')}}'/>");
            }
            function loadLocalLeafletJs() {
                document.write("<script src='{{url_for('static', filename='content/libs/leaflet/leaflet.js')}}'><\/script>");
            }
        </script>
        <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
        integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
        crossorigin="" onerror="loadLocalLeafletCss()"/>
        <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
        integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
        crossorigin="" onerror="loadLocalLeafletJs()"></script>
    </head>
    <body>
        <div id="loadingMessage">Loading map...</div>
        <div id="map"></div>
        <div id="weatherInfo"></div>    
    </body>
    <script src="{{url_for('static', filename='content/map_test.js')}}"></script>
</html>
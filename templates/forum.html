{% extends "layout.html" %}

{% block content %}
<div class="auth-container">
    <h2>Forum</h2>
    <div class="forum-posts">
        {% if posts %}
            {% for post in posts %}
                <div class="forum-post">
                    <h3>{{ post['title'] }}</h3>
                    <p><strong>Category:</strong> {{ post['category'] }} | <strong>By:</strong> {{ post['user_name'] }} | <strong>Date:</strong> {{ post['created_at'][:16].replace('T', ' ') if post['created_at'] else '' }}</p>
                    {% if post['image_url'] %}
                        <img src="{{ post['image_url'] }}" alt="Post Image" style="max-width:100%;max-height:200px;margin-bottom:10px;">
                    {% endif %}
                    {% if post['uploaded_image'] %}
                        <img src="{{ url_for('static', filename='uploads/' ~ post['uploaded_image']) }}" alt="Uploaded Image" style="max-width:100%;max-height:200px;margin-bottom:10px;">
                    {% endif %}
                    <div class="forum-content">{{ post['content'] }}</div>
                </div>
            {% endfor %}
        {% else %}
            <p>No posts yet. Be the first to post!</p>
        {% endif %}
    </div>
</div>
{% endblock %}
